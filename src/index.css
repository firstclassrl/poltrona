@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --theme-background: #0c100a;
  --theme-surface: #10180f;
  --theme-surface-alt: #0f120f;
  --theme-primary: #25401c;
  --theme-primary-strong: #1b3015;
  --theme-accent: #eecf54;
  --theme-accent-soft: #f5e59a;
  --theme-accent-contrast: #0f0f0c;
  --theme-text: #f8f7f2;
  --theme-text-muted: #d8d4c3;
  --theme-border: #eecf54;
  --theme-success: #22c55e;
  --theme-warning: #f59e0b;
  --theme-danger: #ef4444;
  --theme-overlay: rgba(15, 15, 15, 0.35);
  --theme-page-gradient: linear-gradient(135deg, #0c100a 0%, #10180f 45%, #25401c 80%);
  --theme-sidebar-bg: rgba(37, 64, 28, 0.92);
  --theme-sidebar-border: rgba(238, 207, 84, 0.4);
  --theme-sidebar-shadow: 0 8px 32px rgba(37, 64, 28, 0.6);
  --theme-nav-active: rgba(238, 207, 84, 0.15);
  --theme-nav-hover: rgba(238, 207, 84, 0.1);
}

body {
  background: var(--theme-background);
  color: var(--theme-text);
}

.app-gradient {
  background: var(--theme-page-gradient);
}

.surface-card {
  background: var(--theme-surface);
  color: var(--theme-text);
  border: 1px solid color-mix(in srgb, var(--theme-border) 25%, transparent);
}

.surface-card-alt {
  background: var(--theme-surface-alt);
}

.text-on-surface {
  color: var(--theme-text);
}

.text-muted {
  color: var(--theme-text-muted);
}

.border-theme {
  border-color: color-mix(in srgb, var(--theme-border) 60%, transparent);
}

.bg-primary-strong {
  background-color: var(--theme-primary-strong);
}

.bg-primary {
  background-color: var(--theme-primary);
}

.bg-white {
  background-color: var(--theme-surface) !important;
}

.bg-gray-50 {
  background-color: var(--theme-surface-alt) !important;
}

.border-gray-200 {
  border-color: color-mix(in srgb, var(--theme-border) 25%, transparent) !important;
}

.border-gray-300 {
  border-color: color-mix(in srgb, var(--theme-border) 40%, transparent) !important;
}

.text-gray-900,
.text-gray-800 {
  color: var(--theme-text) !important;
}

.text-gray-700,
.text-gray-600 {
  color: var(--theme-text-muted) !important;
}

/* Theming overrides for legacy green/yellow classes */
.text-green-800,
.text-green-700 {
  color: var(--theme-primary) !important;
}

.bg-green-900 {
  background-color: color-mix(in srgb, var(--theme-primary-strong) 95%, var(--theme-primary)) !important;
}
.bg-green-800 {
  background-color: color-mix(in srgb, var(--theme-primary-strong) 80%, var(--theme-primary)) !important;
}
.bg-green-700 {
  background-color: var(--theme-primary-strong) !important;
}
.bg-green-600 {
  background-color: color-mix(in srgb, var(--theme-primary) 85%, transparent) !important;
}
.bg-green-500 {
  background-color: color-mix(in srgb, var(--theme-primary) 75%, transparent) !important;
}
.bg-green-400 {
  background-color: color-mix(in srgb, var(--theme-primary) 65%, transparent) !important;
}
.bg-green-300 {
  background-color: color-mix(in srgb, var(--theme-primary) 50%, var(--theme-surface)) !important;
}
.bg-green-200 {
  background-color: color-mix(in srgb, var(--theme-primary) 35%, var(--theme-surface)) !important;
}
.bg-green-100 {
  background-color: color-mix(in srgb, var(--theme-primary) 20%, var(--theme-surface)) !important;
}
.bg-green-50 {
  background-color: color-mix(in srgb, var(--theme-primary) 12%, var(--theme-surface)) !important;
}

.border-green-600 {
  border-color: color-mix(in srgb, var(--theme-primary) 70%, transparent) !important;
}
.border-green-300 {
  border-color: color-mix(in srgb, var(--theme-primary) 45%, transparent) !important;
}

.focus\:ring-green-500:focus,
.focus\:ring-green-500:focus-visible {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--theme-primary) 70%, transparent) !important;
}

.text-yellow-300,
.text-yellow-400 {
  color: var(--theme-accent) !important;
}
.bg-yellow-500 {
  background-color: var(--theme-accent) !important;
}
.bg-yellow-500\/10 {
  background-color: color-mix(in srgb, var(--theme-accent) 10%, transparent) !important;
}
.bg-yellow-500\/15 {
  background-color: color-mix(in srgb, var(--theme-accent) 15%, transparent) !important;
}
.bg-yellow-500\/5 {
  background-color: color-mix(in srgb, var(--theme-accent) 5%, transparent) !important;
}
.bg-yellow-200 {
  background-color: color-mix(in srgb, var(--theme-accent) 35%, var(--theme-surface)) !important;
}
.bg-yellow-100 {
  background-color: color-mix(in srgb, var(--theme-accent) 22%, var(--theme-surface)) !important;
}
.bg-yellow-50 {
  background-color: color-mix(in srgb, var(--theme-accent) 12%, var(--theme-surface)) !important;
}
.border-yellow-400 {
  border-color: color-mix(in srgb, var(--theme-accent) 65%, transparent) !important;
}
.border-yellow-400\/30 {
  border-color: color-mix(in srgb, var(--theme-accent) 30%, transparent) !important;
}
.border-yellow-400\/40 {
  border-color: color-mix(in srgb, var(--theme-accent) 40%, transparent) !important;
}
.focus\:ring-yellow-500:focus,
.focus\:ring-yellow-500:focus-visible {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--theme-accent) 70%, transparent) !important;
}

/* Force 24-hour format for time inputs */
@layer utilities {
  input[type="time"][data-format="24"] {
    /* Force 24-hour format display */
    -webkit-appearance: none;
    -moz-appearance: textfield;
  }
  
  input[type="time"][data-format="24"]::-webkit-datetime-edit-ampm-field {
    display: none !important;
  }
  
  input[type="time"][data-format="24"]::-webkit-datetime-edit-hour-field,
  input[type="time"][data-format="24"]::-webkit-datetime-edit-minute-field {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Force 24-hour format for all time inputs in the app */
  input[type="time"],
  .time-24h {
    -webkit-appearance: none;
    -moz-appearance: textfield;
  }
  
  input[type="time"]::-webkit-datetime-edit-ampm-field,
  .time-24h::-webkit-datetime-edit-ampm-field {
    display: none !important;
  }

  /* Additional 24-hour format enforcement */
  .time-24h::-webkit-datetime-edit-hour-field,
  .time-24h::-webkit-datetime-edit-minute-field {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Force Italian date format for date inputs */
  input[type="date"][lang="it-IT"] {
    /* Force Italian date format display */
    -webkit-appearance: none;
    -moz-appearance: textfield;
  }
  
  input[type="date"][lang="it-IT"]::-webkit-datetime-edit-text {
    color: #6b7280;
  }
  
  input[type="date"][lang="it-IT"]::-webkit-datetime-edit-month-field,
  input[type="date"][lang="it-IT"]::-webkit-datetime-edit-day-field,
  input[type="date"][lang="it-IT"]::-webkit-datetime-edit-year-field {
    -webkit-appearance: none;
    margin: 0;
  }
}

/* Login liquid-glass helpers (conservano palette attuale) */
@layer components {
  .login-liquid {
    position: relative;
    isolation: isolate;
  }

  .login-liquid::after {
    content: '';
    position: absolute;
    inset: -10%;
    background:
      radial-gradient(60% 60% at 20% 15%, rgba(255, 255, 255, 0.08), transparent 40%),
      radial-gradient(50% 50% at 80% 20%, rgba(255, 255, 255, 0.06), transparent 45%),
      radial-gradient(70% 70% at 50% 90%, rgba(255, 255, 255, 0.05), transparent 50%);
    filter: blur(28px);
    pointer-events: none;
    z-index: 0;
  }

  .login-grain {
    position: absolute;
    inset: 0;
    background-image: radial-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 0);
    background-size: 28px 28px;
    opacity: 0.12;
    mix-blend-mode: soft-light;
    pointer-events: none;
    z-index: 1;
  }

  .login-card-glass {
    position: relative;
    backdrop-filter: blur(18px) saturate(140%);
    -webkit-backdrop-filter: blur(18px) saturate(140%);
    box-shadow:
      0 15px 45px rgba(0, 0, 0, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.18);
    overflow: hidden;
  }

  .login-card-glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.18), transparent 45%);
    pointer-events: none;
  }
}

/* Custom Glass Effect for Sidebar */
@layer components {
  .glass-sidebar-dark {
    background: var(--theme-sidebar-bg);
    backdrop-filter: blur(25px) saturate(180%);
    -webkit-backdrop-filter: blur(25px) saturate(180%);
    
    border: 1px solid var(--theme-sidebar-border);
    
    box-shadow: 
      var(--theme-sidebar-shadow),
      0 0 0 1px color-mix(in srgb, var(--theme-border) 15%, transparent),
      inset 0 1px 0 color-mix(in srgb, var(--theme-border) 25%, transparent);
    color: var(--theme-text);
  }
  
  .glass-nav-item {
    backdrop-filter: blur(15px) saturate(150%);
    -webkit-backdrop-filter: blur(15px) saturate(150%);
    
    box-shadow: 
      inset 0 1px 0 color-mix(in srgb, var(--theme-border) 25%, transparent),
      0 2px 8px color-mix(in srgb, var(--theme-primary) 35%, transparent);
  }
  
  /* Fallback for browsers that don't support backdrop-filter */
  @supports not (backdrop-filter: blur()) {
    .glass-sidebar-dark {
      background: color-mix(in srgb, var(--theme-primary-strong) 92%, transparent);
    }
  }

  /* Brand Color Utilities */
  .brand-green {
    background-color: var(--theme-primary);
  }
  
  .brand-yellow {
    color: var(--theme-accent);
  }
  
  .brand-yellow-bg {
    background-color: var(--theme-accent);
  }
  
  .brand-green-text {
    color: var(--theme-primary);
  }
  
  .brand-border-yellow {
    border-color: var(--theme-accent);
  }
  
  .brand-hover-green:hover {
    background-color: color-mix(in srgb, var(--theme-primary) 80%, transparent);
  }
  
  .brand-hover-yellow:hover {
    background-color: color-mix(in srgb, var(--theme-accent) 10%, transparent);
  }
}